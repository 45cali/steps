kind: step-type
version: "1.0"
metadata:
  name: cf-run
  isPublic: true
  description: Run codefresh pipeline
  sources:
    - 'https://github.com/codefresh-io/steps/tree/master/graduated/cf-run'
  stage: graduated
  official: true
  categories:
    - featured
    - codefresh
  icon:
    type: svg
    url: https://cdn.jsdelivr.net/gh/codefresh-io/steps/graduated/push/icon-1.svg
    background: "#0A375A"
  maintainers:
    - name: Codefresh INC
  examples:
    - workflow:
        version: '1.0'
        steps:
          cf-run:
            type: cf-run
            arguments:
              candidate: ${{build_step_name}}
              tag: latest
              image_name: codefresh/app
              registry: my-registry
spec:
  arguments: |-
    {
        "definitions": {},
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "patterns": [],
        "required": [
            "GIT_CONTEXT",
            "LABELS"
        ],
        "properties": {
            "NAME": {
                "type": "string",
                "description": "Pipeline name or id"
            },
            "TRIGGER": {
                  "type": "string",
                  "description": "Trigger id or name"
            },
            "BRANCH": {
                  "type": "string",
                  "description": "Branch"
            },
            "SHA": {
                 "type": "string",
                 "description": "Set commit sha"
             },
            "NO_CACHE": {
                 "type": "boolean",
                 "default": false,
                 "description": "Ignore cached images"
             },
            "NO_CF_CACHE": {
                  "type": "boolean",
                  "default": false,
                  "description": "Ignore cached images"
            },
            "RESET_VOLUME": {
                   "type": "boolean",
                   "default": false,
                   "description": "Ignore cached images"
           },
            "VARIABLE": {
                   "type": "boolean",
                   "default": false,
                   "description": "Ignore cached images"
           },
            "DETACH": {
                   "type": "boolean",
                   "default": false,
                   "description": "Ignore cached images"
           },
            "ONLY": {
                   "type": "boolean",
                   "default": false,
                   "description": "Ignore cached images"
           },
            "SKIP": {
                   "type": "boolean",
                   "default": false,
                   "description": "Ignore cached images"
           }
        }
    }
