kind: step
version: "1.0"
metadata:
  name: deploy
  isPublic: true
  description: Deploy
  sources:
    - 'https://github.com/codefresh-io/steps/tree/master/graduated/deploy'
  stage: graduated
  official: true
  maintainers:
    - name: Codefresh INC
  examples:
    - workflow:
        version: '1.0'
        steps:
            Deploy:
              title: deploying to cluster
              type: deploy
              arguments:
                kind: kubernetes
                cluster:  myDemoAKSCluster
                namespace: demo
                service: my-python-app
spec:
  arguments: |
    {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "definitions": {},
        "type": "object",
        "properties": {
            "kind": {
                "type": "string"
            },
            "cluster": {
                "type": "string"
            },
            "namespace": {
                "type": "string"
            },
            "file_path": {
                "type": "string"
            },
            "timeout": {
                "type": "number"
            },
            "service": {
                "oneOf": [{
                    "type": ["array", "boolean", "number", "object", "string", "null"]
                }, {
                    "type": "string"
                }]
            },
            "candidate": {
                "type": "object",
                "properties": {
                    "image": {
                        "type": "string"
                    },
                    "registry": {
                        "type": "string"
                    }
                },
                "additionalProperties": false,
                "patterns": [],
                "required": ["image", "registry"]
            }
        },
        "additionalProperties": true,
        "patterns": [],
        "required": ["kind", "cluster", "namespace"]
    }
